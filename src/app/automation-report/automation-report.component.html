<div *ngIf="componentLoading" class="row">
    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 text-center">
        <div style="height: 80vh;
                          display: flex;
                          align-items: center;
                          margin-left: 48%;">
            <div>
                <img src="assets/images/loading.gif" height="50"/>
            </div>
        </div>
    </div>
</div>

<div style="text-align: center; margin-top: 20%" *ngIf="!componentLoading && hasViewPagePermissions() && isError">
    <h4>Data not found!</h4>
    <div>There is no automation test results associated with your partner account.</div>
</div>

<ng-container *ngIf="!componentLoading && hasViewPagePermissions() && !isError">
    <mat-card class="main-container">
        <ng-container>
            <mat-sidenav-container class="sidenav-full" style="height: inherit;">
                <mat-sidenav #sidenav2 opened mode="side" position="start" role="navigation" class="sidenav-wv" style="width: 240px">

                    <div fxLayout="column" class="sidenav-normal">
                        <mat-toolbar class="nav-bar-h" (click)="currentActiveIndex=-1"> Build History</mat-toolbar>
                        <mat-nav-list style="padding-top: 55px;">
                            <mat-list-item *ngFor="let result of buildsData; let i = index" class="list-item" [ngClass]="i===currentActiveIndex?'lt-i-active':''" (click)="setResult(result['id'], i)">
                                <a
                                        aria-controls="profile"
                                        role="tab" data-toggle="tab"><div class="nav-li-h">{{result['name']}}</div>
                                    <div class="nav-li-sb">{{getDataAndTime(result['startedAt'])}}</div></a>
                            </mat-list-item>
                        </mat-nav-list>
                    </div>
                </mat-sidenav>
                <mat-sidenav-content>
                    <ng-container style="padding-left: 5px">
                        <ng-container *ngIf="currentActiveIndex === -1">
                            <mat-toolbar role="toolbar" class="main-header mat-elevation-z1 sticky-header t-bar">
                                <mat-toolbar-row>
                                    {{projectData.title}}
                                </mat-toolbar-row>
                            </mat-toolbar>

                            <div class="side-container">
                                <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 card-row chart-container">
                                    <mat-card class="col-lg-6 col-md-6">
                                        <span style="font-size: 14px"><b>Test Result Trend</b></span>
                                        <div>
                                            <canvas baseChart width="250" height="250"
                                                    [datasets]="lineChartData"
                                                    [labels]="lineChartLabels"
                                                    [options]="lineChartOptions"
                                                    [colors]="lineChartColors"
                                                    [legend]="lineChartLegend"
                                                    [chartType]="lineChartType"
                                                    [plugins]="lineChartPlugins">
                                            </canvas>
                                        </div>
                                    </mat-card>
                                </div>
                            </div>
                        </ng-container>

                        <ng-container *ngIf="currentActiveIndex > -1">
                            <mat-toolbar role="toolbar" class="main-header mat-elevation-z1 sticky-header t-bar">
                                <mat-toolbar-row>
                                    {{buildsData[currentActiveIndex]['name']}}
                                </mat-toolbar-row>
                            </mat-toolbar>

                            <div *ngIf="buildDataLoading" class="row">
                                <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 text-center">
                                    <div style="height: 40vh;
                                          display: flex;
                                          align-items: center;
                                          margin-left: 48%;">
                                        <div>
                                            <img src="assets/images/loading.gif" height="50"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <ng-container *ngIf="!buildDataLoading && showBuild">
                                <app-build-report
                                                  [reportName]="'Report'"
                                                  [buildData]="currentBuild"
                                                  [testCasesData]="buildData"
                                ></app-build-report>
                            </ng-container>
                        </ng-container>

                    </ng-container>

                </mat-sidenav-content>
            </mat-sidenav-container>
        </ng-container>
    </mat-card>
</ng-container>
